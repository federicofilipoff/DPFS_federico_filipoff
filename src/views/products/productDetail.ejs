<!DOCTYPE html>
<html lang="es">

<%- include('../partials/head.ejs', {
    title: 'Producto',
    stylesheets: []
}) %>

<body>
    <%- include('../partials/header.ejs') %>

    <main class="container">
        <section class="row">
            <div class="col-md-12">
                <div class="card mb-4 bg-light shadow">
                    <div class="row g-0">
                        <!-- Imagen del producto -->
                        <div class="col-md-6">
                            <img src="/images/products/<%= data.image %>" alt="<%= data.name %>" class="img-fluid rounded-start" style="object-fit: cover; height: 100%;">
                        </div>

                        <!-- Información del producto -->
                        <div class="col-md-6">
                            <div class="card-body">
                                <h1 class="fw-bold mb-3"><%= data.name %></h1>

                                <div class="mb-2">
                                    <span class="fw-bold">Marca:</span> <%= data.Brand.name %>
                                </div>

                                <div class="mb-2">
                                    <span class="fw-bold">Categoría:</span> <%= data.Category.name %>
                                </div>

                                <div class="mb-2">
                                    <span class="fw-bold">Descripción:</span>
                                    <p><%= data.description %></p>
                                </div>

                                <div class="mb-2">
                                    <span class="fw-bold">Dimensiones:</span> <%= data.size %>
                                </div>

                                <div class="mb-2">
                                    <span class="fw-bold">Color/es:</span> <%= data.Colors.map(color => color.name).join(", ") %>
                                </div>

                                <!-- Enlace a la descripción oficial -->
                                <a href="<%= data.officialWeb %>" target="_blank" class="d-block mt-3">
                                    Ver descripción oficial
                                </a>

                                <!-- Precio y botón de compra -->
                                <p class="producto-precio fs-4 mt-3 fw-bold">Precio: $<%= data.price %></p>

                                <button class="btn btn-primary btn-lg w-100 mb-4">Agregar al Carrito</button>

                                <!-- Opciones de edición y eliminación para administradores -->
                                <% if (user && user.category == 'admin') { %>
                                    <div class="d-flex justify-content-between mt-4">
                                        <div class="row w-100">
                                            <div class="col-6">
                                                <a href="<%= data.id %>/edit" class="btn btn-secondary w-100">Editar producto</a>
                                            </div>
                                            <div class="col-6">
                                                <form action="/products/<%= data.id %>?_method=DELETE" method="POST" onsubmit="return confirm('¿Estás seguro de que querés eliminar este producto?');">
                                                    <button type="submit" class="btn btn-danger w-100">Eliminar producto</button>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                <% } %>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <%- include('../partials/footer.ejs') %>
</body>
</html>
